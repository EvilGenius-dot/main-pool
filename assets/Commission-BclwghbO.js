import{_ as et,h as at,n as st,f as h,p as H,i as ot,v as lt,K as M,k as V,c as r,o as i,b as a,y as b,t as m,u as n,F as j,C as nt,L as A,l as s,w as d,d as p,M as it,x as S,m as rt,N as ct,aN as dt,B as ut,A as F,g as G,G as R,H as U,I as L,z as _t}from"./index-CkTquMHh.js";import{E as pt}from"./el-pagination-Bt35iSo2.js";import{E as mt,a as vt}from"./el-table-column-Cck_-3w5.js";const ft={class:"mb-5"},gt={class:"text-xs text-gray-400"},xt={class:"text-lime-500"},yt={class:"mt-5 flex items-center gap-2"},Ct={class:"fee-coin-list w-full flex flex-wrap gap-3 text-slate-300 text-sm"},bt=["onClick"],ht=["src"],It={class:"text-sm text-stone-50 font-bold overflow-hidden overflow-ellipsis whitespace-nowrap"},Nt={class:"mb-5 grid grid-cols-4 gap-3 max-[600px]:grid-cols-1 max-[1000px]:grid-cols-2"},wt={class:"grid gap-2"},Et={key:0,class:"text-zinc-50 text-lg font-bold"},Tt={key:1,class:"text-zinc-50 text-lg font-bold"},kt={class:"grid gap-2"},zt={key:0,class:"text-zinc-50 text-lg font-bold"},Ot={key:1,class:"text-zinc-50 text-lg font-bold"},Pt={class:"grid gap-2"},Vt={key:0,class:"text-zinc-50 text-lg font-bold"},At={key:1,class:"text-zinc-50 text-lg font-bold"},St={class:"grid gap-2"},Ft={key:0,class:"text-zinc-50 text-lg font-bold"},Rt={key:1,class:"text-zinc-50 text-lg font-bold"},Ut={class:"flex items-center justify-between"},Lt={key:0,class:"flex max-[700px]:flex-col"},$t={class:"max-[700px]:mr-0 max-[700px]:mb-2"},Bt={class:"flex items-center"},Dt=["src"],Ht={key:0},Mt={key:1},jt={key:2},Gt={key:3},Kt={class:"demo-pagination-block mt-5"},qt={__name:"Commission",setup(Jt){const g=window.$Func,C=at(),c=st(),y=h("income"),T=h([]),w=h([]),k=h(!1),z=h(!1),f=h(!1),I=H({all:0,yesterday:0,unpaid:0,paid:0}),K=ot("payAddress-show"),v=H({income:{currentPage:1,size:10,total:0},pay:{currentPage:1,size:10,total:0}}),q=o=>{c.SET_ACTIVE_COIN(o)},O=()=>{const o=C.USER_INFO.email,t=c.ACTIVE_COIN;o&&(f.value=!0,R({method:"post",url:U.p_get_profit,data:{email:o,coin:t}}).then(e=>{f.value=!1,e.data.status==0?e.data.data.forEach(_=>{let u=_.profit?_.profit:0;u=Number(u).toFixed(10),I[_.status]=u}):L.error("查询失败")}))},$=o=>{y.value=o,N()},N=()=>{C.USER_INFO.email&&(y.value=="income"?W():y.value=="pay"&&X())},J=o=>{T.value.length=[];for(let t=0;t<o.length;t++){let e=o[t],_=_t(c.ACTIVE_COIN,e.avg_hashrate),u,E=Number(e.day_profit||0).toFixed(8);e.status==0?u="未支付":e.status==1?u="支付中":e.status==2&&(u="已支付"),e.r&&""+(Number(e.r)*100).toFixed(2);let P={time:e.created_at,hash:_.num+_.unit,fee:E,pay:u,account_type:e.account_type};T.value.push(P)}},Q=o=>{w.value.length=[];for(let t=0;t<o.length;t++){let e=o[t],_;e.status==0?_="支付中":e.status==1?_="已支付":e.status==2&&(_="支付失败");let u={time:e.created_at,payout:e.amount+" "+g.transPoolCoinName(c.ACTIVE_COIN),hash:e.trans_id,pay:_,account_type:e.account_type};w.value.push(u)}console.log(w.value)},W=()=>{const o=C.USER_INFO.email,t=c.ACTIVE_COIN;k.value=!0,R({method:"post",url:U.p_get_fee_rewards,data:{email:o,coin:t,page:v.income.currentPage,size:v.income.size}}).then(e=>{k.value=!1,e.data.status==0?(J(e.data.data.records),v.income.total=e.data.data.total):L.error("查询失败!")})},X=()=>{const o=C.USER_INFO.email,t=c.ACTIVE_COIN;z.value=!0,R({method:"post",url:U.p_get_feeout_log,data:{email:o,coin:t,page:v.pay.currentPage,size:v.pay.size}}).then(e=>{z.value=!1,e.data.status==0?(Q(e.data.data.records),v.pay.total=e.data.data.total):L.error("查询失败!")})};return lt(()=>{O(),N()}),M(()=>C.USER_INFO.email,(o,t)=>{O(),N()}),M(()=>c.ACTIVE_COIN,(o,t)=>{O(),N()}),(o,t)=>{const e=it,_=V("Histogram"),u=rt,E=ct,P=V("Finished"),Y=V("Promotion"),Z=dt,x=mt,B=vt,tt=pt,D=ut;return i(),r(j,null,[t[14]||(t[14]=a("h1",{class:"title text-stone-50 mb-5"}," 邀请奖励 ",-1)),a("div",ft,[a("p",gt,[t[5]||(t[5]=b("以下为收益邮箱")),a("span",xt,m(n(C).USER_INFO.email),1),t[6]||(t[6]=b("奖励账单, 您可在此处自助配置支付地址、查询奖励收益。如您有奖励需求, 请联系您的节点管理员。"))]),a("div",yt,[a("div",Ct,[(i(!0),r(j,null,nt(n(c).COIN_LIST,l=>(i(),r("div",{class:A(["w-36 py-2 px-4 rounded-md hover:cursor-pointer hover:text-white hover:bg-blue-500 active:bg-blue-600 bg-zinc-800 transition-all flex items-center gap-4",{active:n(c).ACTIVE_COIN==l}]),onClick:Qt=>q(l)},[a("div",null,[a("img",{src:`./icon-image/icon-${n(g).transPoolCoinName(l)}.png`,class:"w-[30px]"},null,8,ht)]),a("div",null,[a("div",It,m(n(g).transPoolCoinName(l)),1)])],10,bt))),256))])])]),t[15]||(t[15]=a("h1",{class:"title text-stone-50 mb-5"}," 奖励统计 ",-1)),a("div",Nt,[s(e,null,{default:d(()=>[a("div",wt,[t[7]||(t[7]=a("div",{class:"text-xs text-zinc-300"}," 总奖励 ",-1)),f.value?p("",!0):(i(),r("div",Et,m(I.all)+" "+m(n(g).transPoolCoinName(n(c).ACTIVE_COIN)),1)),f.value?(i(),r("div",Tt," 获取中... ")):p("",!0)])]),_:1}),s(e,null,{default:d(()=>[a("div",kt,[t[8]||(t[8]=a("div",{class:"text-xs text-zinc-300"}," 昨日奖励 ",-1)),f.value?p("",!0):(i(),r("div",zt,m(I.yesterday)+" "+m(n(g).transPoolCoinName(n(c).ACTIVE_COIN)),1)),f.value?(i(),r("div",Ot," 获取中... ")):p("",!0)])]),_:1}),s(e,null,{default:d(()=>[a("div",Pt,[t[9]||(t[9]=a("div",{class:"text-xs text-zinc-300"}," 已支付 ",-1)),f.value?p("",!0):(i(),r("div",Vt,m(I.paid)+" "+m(n(g).transPoolCoinName(n(c).ACTIVE_COIN)),1)),f.value?(i(),r("div",At," 获取中... ")):p("",!0)])]),_:1}),s(e,null,{default:d(()=>[a("div",St,[t[10]||(t[10]=a("div",{class:"text-xs text-zinc-300"}," 未支付 ",-1)),f.value?p("",!0):(i(),r("div",Ft,m(I.unpaid)+" "+m(n(g).transPoolCoinName(n(c).ACTIVE_COIN)),1)),f.value?(i(),r("div",Rt," 获取中... ")):p("",!0)])]),_:1})]),a("div",null,[a("div",Ut,[a("div",null,[s(E,{class:A(["menu-item ml-1",{active:y.value=="income"}]),onClick:t[0]||(t[0]=l=>$("income"))},{default:d(()=>[s(u,{class:"mr-1"},{default:d(()=>[s(_)]),_:1}),t[11]||(t[11]=b(" 收入记录 "))]),_:1},8,["class"]),s(E,{class:A(["menu-item ml-5",{active:y.value=="pay"}]),onClick:t[1]||(t[1]=l=>$("pay"))},{default:d(()=>[s(u,{class:"mr-1"},{default:d(()=>[s(P)]),_:1}),t[12]||(t[12]=b(" 支付记录 "))]),_:1},8,["class"])]),a("div",null,[n(C).OBSERVER?p("",!0):(i(),r("div",Lt,[a("div",$t,[s(Z,{type:"success",plain:"",onClick:t[2]||(t[2]=l=>n(K)({commission:!0}))},{default:d(()=>[s(u,{class:"mr-1"},{default:d(()=>[s(Y)]),_:1}),t[13]||(t[13]=b(" 绑定 / 修改支付地址 "))]),_:1})])]))])]),S((i(),G(B,{data:T.value,class:"w-full mt-5 shadow-[0_0_0_1px_rgba(107,114,128,.3)] rounded-md",stripe:"","row-class-name":"table-row-class","empty-text":"无数据"},{default:d(()=>[s(x,{prop:"coin",label:"币种"},{default:d(l=>[a("div",Bt,[a("img",{src:`./icon-image/icon-${n(g).transPoolCoinName(n(c).ACTIVE_COIN)}.png`,class:"block h-4 mr-1"},null,8,Dt),b(" "+m(n(g).transPoolCoinName(n(c).ACTIVE_COIN)),1)])]),_:1}),s(x,{prop:"fee",label:"数量"},{default:d(l=>[b(m(l.row.fee),1)]),_:1}),s(x,{prop:"account_type",label:"收入来源"},{default:d(l=>[l.row.account_type==1?(i(),r("div",Ht,"CID内抽")):p("",!0),l.row.account_type==2?(i(),r("div",Mt,"节点收入")):p("",!0),l.row.account_type==3?(i(),r("div",jt,"奖励")):p("",!0),l.row.account_type==null?(i(),r("div",Gt,"未知收入")):p("",!0)]),_:1}),s(x,{prop:"pay",label:"支付状态"}),s(x,{prop:"time",label:"日期"})]),_:1},8,["data"])),[[D,k.value],[F,y.value=="income"]]),S(a("div",Kt,[s(tt,{"current-page":v.income.currentPage,"onUpdate:currentPage":t[3]||(t[3]=l=>v.income.currentPage=l),"page-size":v.income.size,"onUpdate:pageSize":t[4]||(t[4]=l=>v.income.size=l),size:"default",disabled:!1,background:!1,layout:"prev, pager, next",total:v.income.total,onCurrentChange:N},null,8,["current-page","page-size","total"])],512),[[F,y.value=="income"]]),S((i(),G(B,{data:w.value,class:"w-full mt-5 shadow-[0_0_0_1px_rgba(107,114,128,.3)] rounded-md",stripe:"","row-class-name":"table-row-class","empty-text":"无数据"},{default:d(()=>[s(x,{prop:"time",label:"日期"}),s(x,{prop:"payout",label:"数量"}),s(x,{prop:"hash",label:"交易哈希"}),s(x,{prop:"pay",label:"状态"})]),_:1},8,["data"])),[[D,z.value],[F,y.value=="pay"]])])],64)}}},Zt=et(qt,[["__scopeId","data-v-6f9a5528"]]);export{Zt as default};
