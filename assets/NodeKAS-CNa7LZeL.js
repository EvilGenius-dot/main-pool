import{e as Y,q as G,n as K,f as D,p as H,s as q,v as B,k as Q,c as u,o as r,b as e,y as h,t as o,x as V,B as J,l as x,D as W,w as E,d as m,u as i,F as A,C as $,g as X,m as Z,z as v,G as p,H as b,I as w,J as z}from"./index-CkTquMHh.js";import{E as tt,a as et}from"./el-tab-pane-BlA9VPLs.js";const st={class:"w-full h-40 relative"},at={class:"pointer-events-none absolute inset-0 w-full h-full p-4"},nt={class:"text-5xl font-bold transition-all"},lt={class:"text-lime-500"},ot={class:"p-4 -translate-y-12"},it={class:"flex rounded-lg w-full"},rt={class:"tabs-t-2 w-full h-full"},dt={key:0,class:"text-sm text-gray-400 flex items-center justify-center w-full h-full"},ut=["onClick"],ct={class:"text-xs text-zinc-300 flex items-center justify-between"},ft={class:"py-4"},mt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},_t={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},ht={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},xt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},vt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},pt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},bt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},wt={key:0},yt={key:1},kt={class:"text-lime-500"},Nt={key:2},gt={key:3},l="KAS",Tt={__name:"NodeKAS",setup(Ct){const c=Y(),_=G(),F=K(),I=D(null),y=D(!1),U=s=>{window.$Func.copyText(s)},a=H({realtimeHashrate:{num:0,unit:"TH"},workerNum:0,networkHashrate:0,theoreticalIncome:0,theoreticalIncomeUnit:"H",diffculty:0,fee:0}),k=H({series:[{name:`${l}算力`,data:[],xAxisData:[]}],showLegend:!1,coin:l}),j=q(()=>{let s="获取中...";return _.QUOTES[l]&&_.RATES.CNY&&a.theoreticalIncome&&(s="¥ "+(Number(a.theoreticalIncome)*_.QUOTES[l]*_.RATES.CNY).toFixed(4)),s}),P=()=>{y.value=!0;let s=`${b.get_pool_hashrate}?coin=${l}`;p({method:"get",url:s}).then(t=>{if(y.value=!1,t.data.status==0){let n=L(t.data.data);k.series=[{name:`${l}算力`,data:n.data,xAxisData:n.time}],k.customUnit=n.unit,I.value.initChart()}else w.error("获取节点信息失败。")})},O=s=>{let t,n=location.hostname,f=s.port,d=s.remark;return d||(console.log(s.protocol),s.protocol==0?t="stratum+tcp://":s.protocol==1?t="stratum+ssl://":s.protocol==2?t="RMS://":s.protocol==3?t="stratum+(tcp/ssl)://":s.protocol==5&&(t="RMS2://"),`${t}${n}:${f}`)},R=()=>{let s=`${b.get_pool_info}?coin=${l}`;p({method:"get",url:s}).then(n=>{n.data.status==0?(a.workerNum=n.data.data.kas.workers,a.realtimeHashrate.num=n.data.data.kas.shares.shares_15m,a.realtimeHashrate.unit=n.data.data.kas.shares.shares_unit):w.error("获取节点信息失败。")});let t=`${b.get_pool_info_2}?coin=${l}`;p({method:"get",url:t}).then(n=>{n.data.status==0?(a.networkHashrate=n.data.data.KAS.net_hash,a.theoreticalIncome=n.data.data.KAS.rewards_per_unit,a.diffculty=n.data.data.KAS.difficulty,a.theoreticalIncomeUnit=n.data.data.KAS.reward_unit):w.error("获取节点信息失败。")})},L=s=>{z.locale("zh-cn");let t=s.tickers,n=s.unit,f={data:[],time:[],unit:n};for(let d=0;d<t.length;d++){let N=t[d][0],g=t[d][1];f.data.push(g),f.time.push(z(N*1e3).format("MMMM Do YYYY, h:mm:ss a"))}return f},M=()=>{p({method:"get",url:b.get_fee}).then(s=>{s.data.status==0?s.data.data.forEach(t=>{t.coin==l&&(a.fee=t.r*100)}):w.error("获取费率失败!")})};return B(()=>{R(),M(),P()}),(s,t)=>{const n=Q("DocumentCopy"),f=Z,d=tt,N=et,g=J;return r(),u("div",null,[e("div",{class:"px-4 text-xs text-zinc-400 flex items-center"},[t[0]||(t[0]=e("span",{class:"block rounded-full w-2 h-2 bg-blue-500 mr-2"},null,-1)),h(o(l)+" 矿池算力 ")]),e("div",st,[V(x(W,{chartConfig:k,ref_key:"hashChartRef",ref:I},null,8,["chartConfig"]),[[g,y.value]]),e("div",at,[e("h2",nt,[e("span",lt,o(a.realtimeHashrate.num),1),h(" "+o(a.realtimeHashrate.unit),1)])])]),e("div",ot,[e("div",it,[e("div",rt,[x(N,{"model-value":"all",type:"border-card",class:"h-full"},{default:E(()=>[!i(c).ENDPOINT_NODE[l]||i(c).ENDPOINT_NODE[l]&&!i(c).ENDPOINT_NODE[l][0]?(r(),u("div",dt,"此节点暂无公开端口")):m("",!0),(r(!0),u(A,null,$(i(c).ENDPOINT_NODE[l],(C,S)=>(r(),X(d,{label:S==0?"全部地区":C[0].endpoint_name.split("-")[0],name:S==0?"all":C[0].endpoint_name},{default:E(()=>[(r(!0),u(A,null,$(C,(T,Et)=>(r(),u("div",{onClick:It=>U(O(T)),class:"p-1"},[e("div",ct,[h(o(O(T))+" ",1),x(f,null,{default:E(()=>[x(n)]),_:1})])],8,ut))),256))]),_:2},1032,["label","name"]))),256))]),_:1})])]),e("div",ft,[e("div",mt,[t[1]||(t[1]=e("div",null," 日理论收益 ",-1)),e("div",null,o(j.value)+" / "+o(a.theoreticalIncomeUnit),1)]),e("div",_t,[t[2]||(t[2]=e("div",null," 全网算力 ",-1)),e("div",null,o(i(v)(l,a.networkHashrate).num)+" "+o(i(v)(l,a.networkHashrate).unit),1)]),e("div",ht,[t[3]||(t[3]=e("div",null," 矿池算力 ",-1)),e("div",null,o(a.realtimeHashrate.num)+" "+o(a.realtimeHashrate.unit),1)]),e("div",xt,[t[4]||(t[4]=e("div",null," 矿工数量 ",-1)),e("div",null,o(a.workerNum),1)]),e("div",vt,[t[5]||(t[5]=e("div",null," 挖矿难度 ",-1)),e("div",null,o(i(v)(l,a.diffculty).num)+" "+o(i(v)(l,a.diffculty).unit),1)]),e("div",pt,[t[6]||(t[6]=e("div",null," 最小起付额 ",-1)),e("div",null,o(i(F).COIN_DEFAULT_PAY[l].count)+" "+o(l),1)]),e("div",bt,[i(c).CONFIG.fee=="1"?(r(),u("div",wt," 收益模式与费率 ")):m("",!0),i(c).CONFIG.fee=="1"?(r(),u("div",yt,[e("div",null,[t[7]||(t[7]=h("FPPS ")),e("span",kt,o(a.fee)+" %",1)])])):m("",!0),i(c).CONFIG.fee=="0"?(r(),u("div",Nt," 收益模式 ")):m("",!0),i(c).CONFIG.fee=="0"?(r(),u("div",gt,t[8]||(t[8]=[e("div",null,"FPPS",-1)]))):m("",!0)]),t[9]||(t[9]=e("div",{class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},[e("div",null," 打款时间(UTC) "),e("div",null," 每日02:00到10:00 ")],-1)),t[10]||(t[10]=e("div",{class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},[e("div",null," 结算时间(UTC) "),e("div",null," 昨日00:00到今日00:00 ")],-1))])])])}}};export{Tt as default};
