import{J as L,g as x,e as p,m as F,c as d,o as s,a as O,j as n,x as u,w as o,f,b as i,aR as T,aS as A,F as D,B as I,u as j,aT as z,N as G,v as c,s as b,aN as H,z as h,aQ as J,D as g,G as k,H as $}from"./index-CB3OnIWK.js";const M={class:"title text-stone-50 mb-5"},P={key:0,class:"text-stone-50"},Q={key:1,class:"text-stone-50"},X={__name:"ObServer",setup(q){const{t:v}=L(),C=x(),a=p(""),l=p(null),t=p(!1),w=F(()=>`${window.location.origin}${window.location.pathname}#/dashboard?ob=${l.value}`),S=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:2}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("获取失败。"))}))},y=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:0}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("创建失败。"))}))},U=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:1}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("删除失败。"))}))};return(e,E)=>{const B=z,N=A,m=T,R=G,_=H,V=J;return s(),d("div",null,[O("h1",M,u(e.$t("观察者链接")),1),n(V,{"label-width":"auto"},{default:o(()=>[n(m,{label:e.$t("子账号")},{default:o(()=>[n(N,{placeholder:e.$t("请先选择子账号"),disabled:t.value,modelValue:a.value,"onUpdate:modelValue":E[0]||(E[0]=r=>a.value=r),onChange:S},{default:o(()=>[(s(!0),d(D,null,I(j(C).SUB_ACCOUNT,(r,K)=>(s(),f(B,{label:r.name,value:r.id},null,8,["label","value"]))),256))]),_:1},8,["placeholder","disabled","modelValue"])]),_:1},8,["label"]),n(m,{label:e.$t("观察者链接")},{default:o(()=>[a.value&&!l.value?(s(),d("p",P,u(e.$t("尚未生成链接, 请点击下方按钮生成。")),1)):i("",!0),a.value?i("",!0):(s(),d("p",Q,u(e.$t("请先选择子账号。")),1)),a.value&&l.value?(s(),f(R,{key:2,type:"primary",href:w.value,target:"_blank"},{default:o(()=>[c(u(w.value),1)]),_:1},8,["href"])):i("",!0)]),_:1},8,["label"]),a.value?(s(),f(m,{key:0,label:" "},{default:o(()=>[b(n(_,{class:"ml-0",loading:t.value,onClick:y,text:"",bg:"",type:"success"},{default:o(()=>[c(u(e.$t("生成链接")),1)]),_:1},8,["loading"]),[[h,!l.value]]),b(n(_,{class:"!ml-0",loading:t.value,onClick:y,text:"",bg:"",type:"success"},{default:o(()=>[c(u(e.$t("更新连接")),1)]),_:1},8,["loading"]),[[h,l.value]]),b(n(_,{loading:t.value,onClick:U,text:"",bg:"",type:"danger"},{default:o(()=>[c(u(e.$t("删除链接")),1)]),_:1},8,["loading"]),[[h,l.value]])]),_:1})):i("",!0)]),_:1})])}}};export{X as default};
