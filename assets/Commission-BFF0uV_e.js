import{_ as ae,J as se,g as oe,k as le,e as I,l as M,i as ne,n as ie,K as j,p as V,c as r,o as c,a as s,x as a,v as x,u as i,F as G,B as ce,L as A,j as l,w as u,b as m,M as re,s as S,t as de,N as ue,aN as _e,A as pe,z as F,f as J,D as R,G as U,H as D,y as me}from"./index-D6Gy3zvT.js";import{E as ve}from"./el-pagination-BYk5nNjh.js";import{E as fe,a as ge}from"./el-table-column-BqwdiDgz.js";const he={class:"title text-stone-50 mb-5"},be={class:"mb-5"},ye={class:"text-xs text-gray-400"},Ce={class:"text-lime-500"},xe={class:"mt-5 flex items-center gap-2"},Ie={class:"fee-coin-list w-full flex flex-wrap gap-3 text-slate-300 text-sm"},Ne=["onClick"],we=["src"],$e={class:"text-sm text-stone-50 font-bold overflow-hidden overflow-ellipsis whitespace-nowrap"},Ee={class:"title text-stone-50 mb-5"},Te={class:"mb-5 grid grid-cols-4 gap-3 max-[600px]:grid-cols-1 max-[1000px]:grid-cols-2"},ke={class:"grid gap-2"},ze={class:"text-xs text-zinc-300"},Oe={key:0,class:"text-zinc-50 text-lg font-bold"},Pe={key:1,class:"text-zinc-50 text-lg font-bold"},Ve={class:"grid gap-2"},Ae={class:"text-xs text-zinc-300"},Se={key:0,class:"text-zinc-50 text-lg font-bold"},Fe={key:1,class:"text-zinc-50 text-lg font-bold"},Re={class:"grid gap-2"},Ue={class:"text-xs text-zinc-300"},De={key:0,class:"text-zinc-50 text-lg font-bold"},Le={key:1,class:"text-zinc-50 text-lg font-bold"},Be={class:"grid gap-2"},He={class:"text-xs text-zinc-300"},Me={key:0,class:"text-zinc-50 text-lg font-bold"},je={key:1,class:"text-zinc-50 text-lg font-bold"},Ge={class:"flex items-center justify-between"},Je={key:0,class:"flex max-[700px]:flex-col"},Ke={class:"max-[700px]:mr-0 max-[700px]:mb-2"},qe={class:"flex items-center"},Qe=["src"],We={key:0},Xe={key:1},Ye={key:2},Ze={key:3},et={class:"demo-pagination-block mt-5"},tt={__name:"Commission",setup(at){const{t:g}=se(),h=window.$Func,C=oe(),d=le(),y=I("income"),T=I([]),$=I([]),k=I(!1),z=I(!1),f=I(!1),N=M({all:0,yesterday:0,unpaid:0,paid:0}),K=ne("payAddress-show"),v=M({income:{currentPage:1,size:10,total:0},pay:{currentPage:1,size:10,total:0}}),q=e=>{d.SET_ACTIVE_COIN(e)},O=()=>{const e=C.USER_INFO.email,o=d.ACTIVE_COIN;e&&(f.value=!0,R({method:"post",url:U.p_get_profit,data:{email:e,coin:o}}).then(t=>{f.value=!1,t.data.status==0?t.data.data.forEach(p=>{let _=p.profit?p.profit:0;_=Number(_).toFixed(10),N[p.status]=_}):D.error(g("查询失败"))}))},L=e=>{y.value=e,w()},w=()=>{C.USER_INFO.email&&(y.value=="income"?X():y.value=="pay"&&Y())},Q=e=>{T.value.length=[];for(let o=0;o<e.length;o++){let t=e[o],p=me(d.ACTIVE_COIN,t.avg_hashrate),_,E=Number(t.day_profit||0).toFixed(8);t.status==0?_=g("未支付"):t.status==1?_=g("支付中"):t.status==2&&(_=g("已支付")),t.r&&""+(Number(t.r)*100).toFixed(2);let P={time:t.created_at,hash:p.num+p.unit,fee:E,pay:_,account_type:t.account_type};T.value.push(P)}},W=e=>{$.value.length=[];for(let o=0;o<e.length;o++){let t=e[o],p;t.status==0?p=g("支付中"):t.status==1?p=g("已支付"):t.status==2&&(p=g("支付失败"));let _={time:t.created_at,payout:t.amount+" "+h.transPoolCoinName(d.ACTIVE_COIN),hash:t.trans_id,pay:p,account_type:t.account_type};$.value.push(_)}console.log($.value)},X=()=>{const e=C.USER_INFO.email,o=d.ACTIVE_COIN;k.value=!0,R({method:"post",url:U.p_get_fee_rewards,data:{email:e,coin:o,page:v.income.currentPage,size:v.income.size}}).then(t=>{k.value=!1,t.data.status==0?(Q(t.data.data.records),v.income.total=t.data.data.total):D.error(g("查询失败"))})},Y=()=>{const e=C.USER_INFO.email,o=d.ACTIVE_COIN;z.value=!0,R({method:"post",url:U.p_get_feeout_log,data:{email:e,coin:o,page:v.pay.currentPage,size:v.pay.size}}).then(t=>{z.value=!1,t.data.status==0?(W(t.data.data.records),v.pay.total=t.data.data.total):D.error(g("查询失败"))})};return ie(()=>{O(),w()}),j(()=>C.USER_INFO.email,(e,o)=>{O(),w()}),j(()=>d.ACTIVE_COIN,(e,o)=>{O(),w()}),(e,o)=>{const t=re,p=V("Histogram"),_=de,E=ue,P=V("Finished"),Z=V("Promotion"),ee=_e,b=fe,B=ge,te=ve,H=pe;return c(),r(G,null,[s("h1",he,a(e.$t("邀请奖励")),1),s("div",be,[s("p",ye,[x(a(e.$t("以下为收益邮箱")),1),s("span",Ce,a(i(C).USER_INFO.email),1),x(a(e.$t("奖励账单, 您可在此处自助配置支付地址、查询奖励收益。如您有奖励需求, 请联系您的节点管理员。")),1)]),s("div",xe,[s("div",Ie,[(c(!0),r(G,null,ce(i(d).COIN_LIST,n=>(c(),r("div",{class:A(["w-36 py-2 px-4 rounded-md hover:cursor-pointer hover:text-white hover:bg-blue-500 active:bg-blue-600 bg-zinc-800 transition-all flex items-center gap-4",{active:i(d).ACTIVE_COIN==n}]),onClick:st=>q(n)},[s("div",null,[s("img",{src:`./icon-image/icon-${i(h).transPoolCoinName(n)}.png`,class:"w-[30px]"},null,8,we)]),s("div",null,[s("div",$e,a(i(h).transPoolCoinName(n)),1)])],10,Ne))),256))])])]),s("h1",Ee,a(e.$t("奖励统计")),1),s("div",Te,[l(t,null,{default:u(()=>[s("div",ke,[s("div",ze,a(e.$t("总奖励")),1),f.value?m("",!0):(c(),r("div",Oe,a(N.all)+" "+a(i(h).transPoolCoinName(i(d).ACTIVE_COIN)),1)),f.value?(c(),r("div",Pe,a(e.$t("获取中...")),1)):m("",!0)])]),_:1}),l(t,null,{default:u(()=>[s("div",Ve,[s("div",Ae,a(e.$t("昨日奖励")),1),f.value?m("",!0):(c(),r("div",Se,a(N.yesterday)+" "+a(i(h).transPoolCoinName(i(d).ACTIVE_COIN)),1)),f.value?(c(),r("div",Fe,a(e.$t("获取中...")),1)):m("",!0)])]),_:1}),l(t,null,{default:u(()=>[s("div",Re,[s("div",Ue,a(e.$t("已支付")),1),f.value?m("",!0):(c(),r("div",De,a(N.paid)+" "+a(i(h).transPoolCoinName(i(d).ACTIVE_COIN)),1)),f.value?(c(),r("div",Le,a(e.$t("获取中...")),1)):m("",!0)])]),_:1}),l(t,null,{default:u(()=>[s("div",Be,[s("div",He,a(e.$t("未支付")),1),f.value?m("",!0):(c(),r("div",Me,a(N.unpaid)+" "+a(i(h).transPoolCoinName(i(d).ACTIVE_COIN)),1)),f.value?(c(),r("div",je,a(e.$t("获取中...")),1)):m("",!0)])]),_:1})]),s("div",null,[s("div",Ge,[s("div",null,[l(E,{class:A(["menu-item ml-1",{active:y.value=="income"}]),onClick:o[0]||(o[0]=n=>L("income"))},{default:u(()=>[l(_,{class:"mr-1"},{default:u(()=>[l(p)]),_:1}),x(" "+a(e.$t("收入记录")),1)]),_:1},8,["class"]),l(E,{class:A(["menu-item ml-5",{active:y.value=="pay"}]),onClick:o[1]||(o[1]=n=>L("pay"))},{default:u(()=>[l(_,{class:"mr-1"},{default:u(()=>[l(P)]),_:1}),x(" "+a(e.$t("支付记录")),1)]),_:1},8,["class"])]),s("div",null,[i(C).OBSERVER?m("",!0):(c(),r("div",Je,[s("div",Ke,[l(ee,{type:"success",plain:"",onClick:o[2]||(o[2]=n=>i(K)({commission:!0}))},{default:u(()=>[l(_,{class:"mr-1"},{default:u(()=>[l(Z)]),_:1}),x(" "+a(e.$t("绑定 / 修改支付地址")),1)]),_:1})])]))])]),S((c(),J(B,{data:T.value,class:"w-full mt-5 shadow-[0_0_0_1px_rgba(107,114,128,.3)] rounded-md",stripe:"","row-class-name":"table-row-class","empty-text":e.$t("无数据")},{default:u(()=>[l(b,{prop:"coin",label:e.$t("币种")},{default:u(n=>[s("div",qe,[s("img",{src:`./icon-image/icon-${i(h).transPoolCoinName(i(d).ACTIVE_COIN)}.png`,class:"block h-4 mr-1"},null,8,Qe),x(" "+a(i(h).transPoolCoinName(i(d).ACTIVE_COIN)),1)])]),_:1},8,["label"]),l(b,{prop:"fee",label:e.$t("数量")},{default:u(n=>[x(a(n.row.fee),1)]),_:1},8,["label"]),l(b,{prop:"account_type",label:e.$t("收入来源")},{default:u(n=>[n.row.account_type==1?(c(),r("div",We,a(e.$t("CID内抽")),1)):m("",!0),n.row.account_type==2?(c(),r("div",Xe,a(e.$t("节点收入")),1)):m("",!0),n.row.account_type==3?(c(),r("div",Ye,a(e.$t("奖励")),1)):m("",!0),n.row.account_type==null?(c(),r("div",Ze,a(e.$t("未知收入")),1)):m("",!0)]),_:1},8,["label"]),l(b,{prop:"pay",label:e.$t("支付状态")},null,8,["label"]),l(b,{prop:"time",label:e.$t("日期")},null,8,["label"])]),_:1},8,["data","empty-text"])),[[H,k.value],[F,y.value=="income"]]),S(s("div",et,[l(te,{"current-page":v.income.currentPage,"onUpdate:currentPage":o[3]||(o[3]=n=>v.income.currentPage=n),"page-size":v.income.size,"onUpdate:pageSize":o[4]||(o[4]=n=>v.income.size=n),size:"default",disabled:!1,background:!1,layout:"prev, pager, next",total:v.income.total,onCurrentChange:w},null,8,["current-page","page-size","total"])],512),[[F,y.value=="income"]]),S((c(),J(B,{data:$.value,class:"w-full mt-5 shadow-[0_0_0_1px_rgba(107,114,128,.3)] rounded-md",stripe:"","row-class-name":"table-row-class","empty-text":e.$t("无数据")},{default:u(()=>[l(b,{prop:"time",label:e.$t("日期")},null,8,["label"]),l(b,{prop:"payout",label:e.$t("数量")},null,8,["label"]),l(b,{prop:"hash",label:e.$t("交易哈希")},null,8,["label"]),l(b,{prop:"pay",label:e.$t("状态")},null,8,["label"])]),_:1},8,["data","empty-text"])),[[H,z.value],[F,y.value=="pay"]])])],64)}}},it=ae(tt,[["__scopeId","data-v-8d78586d"]]);export{it as default};
