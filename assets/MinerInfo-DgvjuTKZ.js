import{f as x,h as y,n as z,p as H,v as N,aV as I,c as f,b as t,y as b,t as r,u as e,l as M,D as S,z as n,d as w,J as h,G as j,H as T,I as V,j as Y,o as v}from"./index-BWeRxd06.js";const D={class:"px-4 text-xs text-zinc-400 flex items-center"},A={class:"w-full h-40 relative"},E={class:"pointer-events-none absolute inset-0 w-full h-full p-4"},R={class:"text-5xl font-bold transition-all"},O={class:"text-lime-500"},B={class:"p-4 -translate-y-12"},L={class:"p-4 grid gap-3 grid-cols-2 rounded-lg w-full border border-zinc-700 bg-zinc-800"},$={class:"text-sm text-zinc-200"},F={class:"flex justify-center font-bold"},G={class:"text-sm text-zinc-200"},J={class:"flex justify-center font-bold"},P={class:"py-4"},q={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},K={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},Q={key:0},U={key:1},W={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},X={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},Z={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},tt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},at={__name:"MinerInfo",setup(et){Y();const a=I(),d=x(null),g=x("hourly");y();const m=z(),p=x(!1),c=H({series:[{name:"算力",data:[],xAxisData:[]}],showLegend:!1,coin:""}),k=i=>{p.value=!0,j({method:"get",url:T.get_worker_detail.replace("{coin}",m.ACTIVE_COIN).replace("{mode}",g.value).replace("{worker}",i.worker).replace("{sid}",i.sid)}).then(s=>{if(p.value=!1,s.data.status==0){let l=C(s.data.data);c.series=[{name:`${m.ACTIVE_COIN}算力`,data:l.data,xAxisData:l.time}],c.coin=m.ACTIVE_COIN,d.value.initChart()}else V.error("获取图表数据失败。")}),d.value.initChart()},C=i=>{h.locale("zh-cn");let s=i.start_time||i.startTime,l=i.hashrates,u={data:[],time:[]};for(let o=0;o<l.length;o++){let _;_=s+i.timeInterval*1e3*o,u.data.push(l[o]),u.time.push(h(_).format("MMMM Do YYYY, h:mm:ss a"))}return u};return N(()=>{let i;a.params.workerName!="unknow"&&(i=a.params.workerName),a.params.workerId!="unknow"&&(i=a.params.workerId),k({workerName:a.params.workerName,sid:a.params.sid,worker:i})}),(i,s)=>(v(),f("div",null,[t("div",D,[s[0]||(s[0]=t("span",{class:"block rounded-full w-2 h-2 bg-blue-500 mr-2"},null,-1)),b(r(e(a).params.workerName),1)]),t("div",A,[M(S,{chartConfig:c,ref_key:"hashChartRef",ref:d},null,8,["chartConfig"]),t("div",E,[t("h2",R,[t("span",O,r(e(n)("btc",e(a).params.realtimeHashrate).num),1),b(" "+r(e(n)("btc",e(a).params.realtimeHashrate).unit)+" / S ",1)])])]),t("div",B,[t("div",L,[t("div",$,[s[1]||(s[1]=t("div",{class:"text-zinc-400 text-xs mb-2"}," 当前算力 ",-1)),t("div",F,r(e(n)("btc",e(a).params.realtimeHashrate).num)+" "+r(e(n)("btc",e(a).params.realtimeHashrate).unit)+" /S ",1)]),t("div",G,[s[2]||(s[2]=t("div",{class:"text-zinc-400 text-xs mb-2"}," 24H算力 ",-1)),t("div",J,r(e(n)("btc",e(a).params.avgHashrate1440).num)+" "+r(e(n)("btc",e(a).params.avgHashrate1440).unit)+" / S ",1)])]),t("div",P,[t("div",q,[s[3]||(s[3]=t("div",null," 设备名称 ",-1)),t("div",null,r(e(a).params.workerName),1)]),t("div",K,[s[4]||(s[4]=t("div",null," 活跃状态 ",-1)),t("div",null,[e(a).params.status=="active"?(v(),f("div",Q,"在线")):w("",!0),e(a).params.status=="inactive"?(v(),f("div",U,"离线")):w("",!0)])]),t("div",W,[s[5]||(s[5]=t("div",null," 当前算力 ",-1)),t("div",null,r(e(n)("btc",e(a).params.realtimeHashrate).num)+" "+r(e(n)("btc",e(a).params.realtimeHashrate).unit)+" /S ",1)]),t("div",X,[s[6]||(s[6]=t("div",null," 24H算力 ",-1)),t("div",null,r(e(n)("btc",e(a).params.avgHashrate1440).num)+" "+r(e(n)("btc",e(a).params.avgHashrate1440).unit)+" / S ",1)]),t("div",Z,[s[7]||(s[7]=t("div",null," 拒绝率 ",-1)),t("div",null,r((e(a).params.avgRejectrate1440*100).toFixed(2))+" % ",1)]),t("div",tt,[s[8]||(s[8]=t("div",null," 最后提交日期 ",-1)),t("div",null,r(e(h)(e(a).params.lastShareTime*1e3).format("MMMM Do YYYY, h:mm:ss a")),1)])])])]))}};export{at as default};
