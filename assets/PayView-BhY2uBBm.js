import{_ as ft,n as mt,h as xt,q as pt,f as y,p as j,K,v as vt,c as x,b as e,d as E,l,w as v,m as gt,u as o,y as m,i as Ct,L as W,x as X,B as bt,A as Z,F as tt,C as et,G as Y,H as M,I as R,j as zt,k as h,o as p,t as r,c0 as S,J as st,z as ot}from"./index-CkTquMHh.js";import{E as yt}from"./el-pagination-Bt35iSo2.js";import{_ as U,a as O}from"./daole-C-o-csqo.js";import{E as ht,a as It,S as it}from"./effect-cards-BeamOJXo.js";const Nt={class:"over-container"},At={class:"px-9 pb-4 relative"},Tt={class:"bg-zinc-900 rounded-2xl relative overflow-hidden"},wt={class:"p-4 relative grid gap-6 grid-cols-2"},Pt={class:"text-sm"},Et={class:"text-zinc-200"},St={class:"text-sm"},Ut={class:"text-zinc-200"},Ot={class:"text-sm"},Vt={class:"text-zinc-200"},kt={class:"text-sm"},Dt={class:"text-zinc-200"},Bt={class:"bg-zinc-900 rounded-2xl relative overflow-hidden"},jt={class:"p-4 relative grid gap-6 grid-cols-2"},Yt={class:"text-sm"},Mt={class:"text-zinc-200"},Rt={class:"text-sm"},Lt={class:"text-zinc-200"},Ft={class:"text-sm"},qt={class:"text-zinc-200"},Ht={class:"text-sm"},$t={class:"text-zinc-200"},Jt={key:0,class:"text-emerald-400 text-xs flex items-center px-4 mb-4"},Qt={key:1,class:"mb-4"},Gt={class:"px-4"},Kt={class:"border-t border-b py-2 text-zinc-300 border-zinc-700 bg-zinc-800 border-b-0 rounded-tl-2xl rounded-tr-2xl"},Wt={class:"flex justify-around items-center"},Xt={class:"text-zinc-300 text-xs flex items-center justify-center"},Zt={class:"text-zinc-300 text-xs flex items-center justify-center"},te={class:"mb-10 px-4"},ee={class:"overflow-hidden border-t border-b border-zinc-700 bg-zinc-800 rounded-bl-2xl rounded-br-2xl"},se={class:"relative"},oe={key:0,class:"log-item px-4 flex justify-center py-2 text-xs text-zinc-600 border-zinc-700"},ie=["onClick"],ae={class:"w-2/3 flex flex-col justify-center"},re={class:"text-xs font-bold text-zinc-200 mb-1"},ne={class:"text-xs text-zinc-400"},le={class:"w-1/3 flex justify-end items-center text-xs font-bold text-zinc-200"},de={class:"demo-pagination-block"},ce={class:"relative"},ue={key:0,class:"log-item px-4 flex justify-center py-2 text-xs text-zinc-600 border-zinc-700"},_e=["onClick"],fe={class:"w-2/3 flex flex-col justify-center"},me={class:"text-xs font-bold text-zinc-200"},xe={class:"w-1/3 flex justify-end items-center text-xs font-bold text-zinc-200"},pe={class:"demo-pagination-block"},ve={__name:"PayView",setup(ge){const L=zt(),u=mt(),d=xt(),F=pt(),_=y("income"),A=y([]),V=y(!1),T=y([]),k=y(!1),q=y(!1),H=Ct("payAddress-show"),g=j({size:20,currentPage:1,total:0}),C=j({size:20,currentPage:1,total:0}),n=j({totalProfit:0,unpaidProfit:0,yesterdayProfit:0,yetProfit:0,estimateProfit:0}),at=s=>{L.push({name:"rewards",query:{data:JSON.stringify(s)}})},rt=s=>{L.push({name:"payout",query:{data:JSON.stringify(s)}})},$=()=>{for(let s in n)n[s]=0},z=s=>Number(s).toFixed(8),w=s=>{let t="计算中...",c=F.QUOTES[u.ACTIVE_COIN],f=F.RATES.CNY,b=z(s);return c&&f&&b&&(t="¥ "+(Number(b)*c*f).toFixed(4)),t},D=s=>{q.value=!0,Y({url:M.get_account_profit.replace("{coin}",u.ACTIVE_COIN).replace("{sid}",s)}).then(t=>{if(q.value=!1,t.data.status==0){let c=0,f=0,b=0,P=0;t.data.data.forEach(a=>{a.profit!=null&&a.status=="all"&&(c=a.profit?a.profit:0),a.profit!=null&&a.status=="yesterday"&&(f=a.profit?a.profit:0),a.profit!=null&&a.status=="unpaid"&&(b=a.profit?a.profit:0),a.profit!=null&&a.status=="estimate_profit"&&(P=a.profit?a.profit:0)}),n.unpaidProfit=b,n.yesterdayProfit=f,n.totalProfit=c,n.estimateProfit=P,n.yetProfit=Number(c)-Number(b)}else R.error("获取收益失败。")})},I=()=>{let s=u.ACTIVE_COIN;A.value=[],V.value=!0,Y({method:"get",url:M.get_account_rewards.replace("{coin}",s).replace("{sid}",d.ACTIVE_SUB_ACCOUNT_ID).replace("{page}",g.currentPage).replace("{size}",g.size)}).then(t=>{t.data.status==0?(A.value=t.data.data.records,g.total=t.data.data.total):R.error("获取日志失败。"),V.value=!1})},N=()=>{let s=u.ACTIVE_COIN;T.value=[],k.value=!0,Y({method:"get",url:M.get_account_payouts.replace("{coin}",s).replace("{sid}",d.ACTIVE_SUB_ACCOUNT_ID).replace("{page}",C.currentPage).replace("{size}",C.size)}).then(t=>{t.data.status==0?(T.value=t.data.data.records,C.total=t.data.data.total):R.error("获取日志失败。"),k.value=!1})};K(()=>d.SUB_ACCOUNT,(s,t)=>{$();const c=d.SUB_ACCOUNT;d.ACTIVE_SUB_ACCOUNT_ID==null&&c[0]&&d.SET_ACTIVE_SUB_ACCOUNT_ID(c[0].id),c[0]&&(D(d.ACTIVE_SUB_ACCOUNT_ID),_.value=="income"?I():_.value=="pay"&&N())},{deep:!0}),K(()=>u.ACTIVE_COIN,(s,t)=>{$();const c=d.SUB_ACCOUNT;d.ACTIVE_SUB_ACCOUNT_ID==null&&c[0]&&d.SET_ACTIVE_SUB_ACCOUNT_ID(c[0].id),c[0]&&(D(d.ACTIVE_SUB_ACCOUNT_ID),_.value=="income"?I():_.value=="pay"&&N())},{deep:!0}),vt(()=>{const s=d.SUB_ACCOUNT;d.ACTIVE_SUB_ACCOUNT_ID==null&&s[0]&&d.SET_ACTIVE_SUB_ACCOUNT_ID(s[0].id),s[0]&&(D(d.ACTIVE_SUB_ACCOUNT_ID),_.value=="income"?I():_.value=="pay"&&N())});const J=s=>{_.value=s,_.value=="income"?I():_.value=="pay"&&N()},B=y(null),nt=s=>{B.value=s},lt=()=>{B.value.slidePrev()},dt=()=>{B.value.slideNext()};return(s,t)=>{const c=h("DArrowLeft"),f=gt,b=h("DArrowRight"),P=h("Microphone"),a=h("Promotion"),ct=h("Histogram"),ut=h("Finished"),Q=yt,G=bt;return p(),x("div",Nt,[e("div",At,[e("div",{onClick:lt,class:"h-full flex items-center pb-4 absolute left-[1rem] text-zinc-400 breathing-slide-left-animation"},[l(f,null,{default:v(()=>[l(c)]),_:1})]),e("div",{onClick:dt,class:"h-full flex items-center pb-4 absolute right-[1rem] text-zinc-400 breathing-slide-left-animation"},[l(f,null,{default:v(()=>[l(b)]),_:1})]),l(o(It),{modules:[o(ht)],effect:"cards",onSwiper:nt},{default:v(()=>[l(o(it),null,{default:v(()=>[e("div",Tt,[t[11]||(t[11]=e("div",{class:"absolute bg-zinc-800 w-[26rem] h-[10rem] -rotate-45 right-[-7.5rem] bottom-[-8.5rem]"},null,-1)),t[12]||(t[12]=e("div",{class:"absolute bg-zinc-700 w-[20rem] h-[10rem] -rotate-45 right-[-7.5rem] bottom-[-8.5rem]"},null,-1)),t[13]||(t[13]=e("div",{class:"absolute bg-zinc-600 w-[14rem] h-[10rem] -rotate-45 right-[-7.5rem] bottom-[-8.5rem]"},null,-1)),e("div",wt,[e("div",Pt,[t[7]||(t[7]=e("div",{class:"flex items-center text-xs text-zinc-400 mb-2"},[e("img",{src:U,class:"h-4 mr-1"}),m(" 总收入 ")],-1)),e("div",Et,r(z(n.totalProfit))+" "+r(o(S).transPoolCoinName(o(u).ACTIVE_COIN)),1)]),e("div",St,[t[8]||(t[8]=e("div",{class:"flex items-center text-xs text-zinc-400 mb-2"},[e("img",{src:U,class:"h-4 mr-1"}),m(" 已支付 ")],-1)),e("div",Ut,r(z(n.yetProfit))+" "+r(o(S).transPoolCoinName(o(u).ACTIVE_COIN)),1)]),e("div",Ot,[t[9]||(t[9]=e("div",{class:"flex items-center text-xs text-zinc-400 mb-2"},[e("img",{src:O,class:"h-4 mr-1"}),m(" 预估CNY ")],-1)),e("div",Vt,r(w(n.totalProfit)),1)]),e("div",kt,[t[10]||(t[10]=e("div",{class:"flex items-center text-xs text-zinc-400 mb-2"},[e("img",{src:O,class:"h-4 mr-1"}),m(" 预估CNY ")],-1)),e("div",Dt,r(w(n.yetProfit)),1)])])])]),_:1}),l(o(it),null,{default:v(()=>[e("div",Bt,[t[18]||(t[18]=e("div",{class:"absolute bg-zinc-800 w-[26rem] h-[10rem] -rotate-45 right-[-7.5rem] bottom-[-8.5rem]"},null,-1)),t[19]||(t[19]=e("div",{class:"absolute bg-zinc-700 w-[20rem] h-[10rem] -rotate-45 right-[-7.5rem] bottom-[-8.5rem]"},null,-1)),t[20]||(t[20]=e("div",{class:"absolute bg-zinc-600 w-[14rem] h-[10rem] -rotate-45 right-[-7.5rem] bottom-[-8.5rem]"},null,-1)),e("div",jt,[e("div",Yt,[t[14]||(t[14]=e("div",{class:"flex items-center text-xs text-zinc-400 mb-2"},[e("img",{src:U,class:"h-4 mr-1"}),m(" 未支付收入 ")],-1)),e("div",Mt,r(z(Number(n.unpaidProfit)+Number(n.estimateProfit)))+" "+r(o(S).transPoolCoinName(o(u).ACTIVE_COIN)),1)]),e("div",Rt,[t[15]||(t[15]=e("div",{class:"flex items-center text-xs text-zinc-400 mb-2"},[e("img",{src:U,class:"h-4 mr-1"}),m(" 今日已挖 ")],-1)),e("div",Lt,r(z(n.estimateProfit))+" "+r(o(S).transPoolCoinName(o(u).ACTIVE_COIN)),1)]),e("div",Ft,[t[16]||(t[16]=e("div",{class:"flex items-center text-xs text-zinc-400 mb-2"},[e("img",{src:O,class:"h-4 mr-1"}),m(" 预估CNY ")],-1)),e("div",qt,r(w(Number(n.unpaidProfit)+Number(n.estimateProfit))),1)]),e("div",Ht,[t[17]||(t[17]=e("div",{class:"flex items-center text-xs text-zinc-400 mb-2"},[e("img",{src:O,class:"h-4 mr-1"}),m(" 预估CNY ")],-1)),e("div",$t,r(w(n.estimateProfit)),1)])])])]),_:1})]),_:1},8,["modules"])]),o(u).COIN_DEFAULT_PAY[o(u).ACTIVE_COIN].pay_48?(p(),x("div",Jt,[l(f,{class:"mr-2"},{default:v(()=>[l(P)]),_:1}),t[21]||(t[21]=m("请注意，当前币种首次添加支付地址时，48小时候开始付款，48小时内收益持续累积，首次支付时间为添加支付地址之后的48小时。 "))])):E("",!0),o(d).OBSERVER?E("",!0):(p(),x("div",Qt,[e("div",{class:"!border-l-0 !border-r-0 !rounded-none m-button-default w-full",onClick:t[0]||(t[0]=(...i)=>o(H)&&o(H)(...i))},[l(f,{class:"mr-1"},{default:v(()=>[l(a)]),_:1}),t[22]||(t[22]=m(" 修改 / 绑定支付地址 "))])])),e("div",Gt,[e("div",Kt,[e("div",Wt,[e("div",{onClick:t[1]||(t[1]=i=>J("income")),class:W(["mode-item border-r border-zinc-600 flex items-center justify-center flex-col w-1/2",{active:_.value=="income"}])},[e("div",Xt,[l(f,{class:"mr-1"},{default:v(()=>[l(ct)]),_:1}),t[23]||(t[23]=m("收入记录 "))])],2),e("div",{onClick:t[2]||(t[2]=i=>J("pay")),class:W(["mode-item flex items-center justify-center flex-col w-1/2",{active:_.value=="pay"}])},[e("div",Zt,[l(f,{class:"mr-1"},{default:v(()=>[l(ut)]),_:1}),t[24]||(t[24]=m("支付记录 "))])],2)])])]),e("div",te,[e("div",ee,[t[25]||(t[25]=e("div",{class:"flex border-b border-zinc-700 px-4 py-2 text-xs text-zinc-300"},[e("div",{class:"w-1/2 flex"}," 日期 "),e("div",{class:"w-1/2 flex justify-end"}," 数量 ")],-1)),X((p(),x("div",se,[A.value.length?E("",!0):(p(),x("div",oe," 无记录 ")),(p(!0),x(tt,null,et(A.value,i=>(p(),x("div",{class:"log-item px-4 flex py-2 text-xs text-zinc-300 border-zinc-700",onClick:_t=>at(i)},[e("div",ae,[e("div",re,r(o(st)(i.day).format("MMMM Do YYYY, h:mm:ss a")),1),e("div",ne," 日均算力: "+r(o(ot)(o(u).ACTIVE_COIN,i.avg_hashrate).num)+r(o(ot)(o(u).ACTIVE_COIN,i.avg_hashrate).unit),1)]),e("div",le,r(z(i.day_profit)),1)],8,ie))),256)),e("div",de,[l(Q,{"current-page":g.currentPage,"onUpdate:currentPage":t[3]||(t[3]=i=>g.currentPage=i),"page-size":g.size,"onUpdate:pageSize":t[4]||(t[4]=i=>g.size=i),size:"default",disabled:!1,background:!1,layout:"prev, pager, next",total:g.total,onCurrentChange:I},null,8,["current-page","page-size","total"])])])),[[G,V.value],[Z,_.value=="income"]]),X((p(),x("div",ce,[T.value.length?E("",!0):(p(),x("div",ue," 无记录 ")),(p(!0),x(tt,null,et(T.value,i=>(p(),x("div",{class:"log-item px-4 flex py-2 text-xs text-zinc-300 border-zinc-700",onClick:_t=>rt(i)},[e("div",fe,[e("div",me,r(o(st)(i.time).format("MMMM Do YYYY, h:mm:ss a")),1)]),e("div",xe,r(z(i.amount)),1)],8,_e))),256)),e("div",pe,[l(Q,{"current-page":C.currentPage,"onUpdate:currentPage":t[5]||(t[5]=i=>C.currentPage=i),"page-size":C.size,"onUpdate:pageSize":t[6]||(t[6]=i=>C.size=i),size:"default",disabled:!1,background:!1,layout:"prev, pager, next",total:C.total,onCurrentChange:N},null,8,["current-page","page-size","total"])])])),[[G,k.value],[Z,_.value=="pay"]])])])])}}},he=ft(ve,[["__scopeId","data-v-a2dedfc5"]]);export{he as default};
