import{J as L,g as x,e as p,I as F,c as d,o as s,a as I,j as n,t as u,w as o,f,b as i,aR as O,aS as T,F as A,z as D,u as j,aT as z,N as J,s as c,p as b,aN as M,x as h,aQ as P,B as g,C as k,D as $}from"./index-DC_M4ZfZ.js";const Q={class:"title text-stone-50 mb-5"},q={key:0,class:"text-stone-50"},G={key:1,class:"text-stone-50"},X={__name:"ObServer",setup(H){const{t:v}=L(),E=x(),a=p(""),l=p(null),t=p(!1),w=F(()=>`${window.location.origin}${window.location.pathname}#/dashboard?ob=${l.value}`),S=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:2}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("获取失败。"))}))},y=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:0}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("创建失败。"))}))},U=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:1}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("删除失败。"))}))};return(e,C)=>{const B=z,N=T,_=O,R=J,m=M,V=P;return s(),d("div",null,[I("h1",Q,u(e.$t("观察者链接")),1),n(V,{"label-width":"auto"},{default:o(()=>[n(_,{label:e.$t("子账号")},{default:o(()=>[n(N,{placeholder:e.$t("请先选择子账号"),disabled:t.value,modelValue:a.value,"onUpdate:modelValue":C[0]||(C[0]=r=>a.value=r),onChange:S},{default:o(()=>[(s(!0),d(A,null,D(j(E).SUB_ACCOUNT,(r,K)=>(s(),f(B,{label:r.name,value:r.id},null,8,["label","value"]))),256))]),_:1},8,["placeholder","disabled","modelValue"])]),_:1},8,["label"]),n(_,{label:e.$t("观察者链接")},{default:o(()=>[a.value&&!l.value?(s(),d("p",q,u(e.$t("尚未生成链接, 请点击下方按钮生成。")),1)):i("",!0),a.value?i("",!0):(s(),d("p",G,u(e.$t("请先选择子账号。")),1)),a.value&&l.value?(s(),f(R,{key:2,type:"primary",href:w.value,target:"_blank"},{default:o(()=>[c(u(w.value),1)]),_:1},8,["href"])):i("",!0)]),_:1},8,["label"]),a.value?(s(),f(_,{key:0,label:" "},{default:o(()=>[b(n(m,{class:"ml-0",loading:t.value,onClick:y,text:"",bg:"",type:"success"},{default:o(()=>[c(u(e.$t("生成链接")),1)]),_:1},8,["loading"]),[[h,!l.value]]),b(n(m,{class:"!ml-0",loading:t.value,onClick:y,text:"",bg:"",type:"success"},{default:o(()=>[c(u(e.$t("更新连接")),1)]),_:1},8,["loading"]),[[h,l.value]]),b(n(m,{loading:t.value,onClick:U,text:"",bg:"",type:"danger"},{default:o(()=>[c(u(e.$t("删除链接")),1)]),_:1},8,["loading"]),[[h,l.value]])]),_:1})):i("",!0)]),_:1})])}}};export{X as default};
