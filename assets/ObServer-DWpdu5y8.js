import{h as V,f as _,s as B,c as d,o as n,b as L,l as u,w as s,g as p,d as i,aR as A,aS as F,F as O,C as T,u as I,aT as $,N as D,y as v,t as G,x as f,aN as H,A as b,aQ as M,G as g,H as k,I as x}from"./index-BWeRxd06.js";const P={key:0,class:"text-stone-50"},Q={key:1,class:"text-stone-50"},J={__name:"ObServer",setup(j){const w=V(),e=_(""),o=_(null),a=_(!1),h=B(()=>`${window.location.origin}${window.location.pathname}#/dashboard?ob=${o.value}`),C=()=>{e.value&&(a.value=!0,g({url:k.observer,method:"post",data:{sid:e.value,action:2}}).then(t=>{a.value=!1,t.data.status==0?o.value=t.data.data:x.error("获取失败。")}))},y=()=>{e.value&&(a.value=!0,g({url:k.observer,method:"post",data:{sid:e.value,action:0}}).then(t=>{a.value=!1,t.data.status==0?o.value=t.data.data:x.error("创建失败。")}))},E=()=>{e.value&&(a.value=!0,g({url:k.observer,method:"post",data:{sid:e.value,action:1}}).then(t=>{a.value=!1,t.data.status==0?o.value=t.data.data:x.error("删除失败。")}))};return(t,l)=>{const S=$,U=F,c=A,N=D,m=H,R=M;return n(),d("div",null,[l[4]||(l[4]=L("h1",{class:"title text-stone-50 mb-5"}," 观察者链接 ",-1)),u(R,{"label-width":"auto"},{default:s(()=>[u(c,{label:"子账号"},{default:s(()=>[u(U,{placeholder:"请先选择子账号",disabled:a.value,modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=r=>e.value=r),onChange:C},{default:s(()=>[(n(!0),d(O,null,T(I(w).SUB_ACCOUNT,(r,q)=>(n(),p(S,{label:r.name,value:r.id},null,8,["label","value"]))),256))]),_:1},8,["disabled","modelValue"])]),_:1}),u(c,{label:"观察者链接"},{default:s(()=>[e.value&&!o.value?(n(),d("p",P,"尚未生成链接, 请点击下方按钮生成。")):i("",!0),e.value?i("",!0):(n(),d("p",Q,"请先选择子账号。")),e.value&&o.value?(n(),p(N,{key:2,type:"primary",href:h.value,target:"_blank"},{default:s(()=>[v(G(h.value),1)]),_:1},8,["href"])):i("",!0)]),_:1}),e.value?(n(),p(c,{key:0,label:" "},{default:s(()=>[f(u(m,{class:"ml-0",loading:a.value,onClick:y,text:"",bg:"",type:"success"},{default:s(()=>l[1]||(l[1]=[v("生成链接")])),_:1},8,["loading"]),[[b,!o.value]]),f(u(m,{class:"!ml-0",loading:a.value,onClick:y,text:"",bg:"",type:"success"},{default:s(()=>l[2]||(l[2]=[v("更新连接")])),_:1},8,["loading"]),[[b,o.value]]),f(u(m,{loading:a.value,onClick:E,text:"",bg:"",type:"danger"},{default:s(()=>l[3]||(l[3]=[v("删除链接")])),_:1},8,["loading"]),[[b,o.value]])]),_:1})):i("",!0)]),_:1})])}}};export{J as default};
