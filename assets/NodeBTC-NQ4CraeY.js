import{K as U,f as D,e as V,q as L,p as F,s as Q,v as q,k as J,c,o as i,b as e,y as x,t as a,x as K,B as W,l as p,D as X,u as o,z as u,w as $,d as _,F as B,C as H,g as Z,m as tt,G as b,H as C,I as w,J as S}from"./index-LtxatZno.js";import{E as et,a as st}from"./el-tab-pane-CXULa-KH.js";/* empty css                   */const at={class:"px-4 text-xs text-zinc-400 flex items-center"},lt={class:"w-full h-40 relative"},ot={class:"pointer-events-none absolute inset-0 w-full h-full p-4"},nt={class:"text-5xl font-bold transition-all"},it={class:"text-lime-500"},rt={class:"p-4 -translate-y-12"},ct={class:"flex rounded-lg w-full"},dt={class:"tabs-t-2 w-full h-full"},ut={key:0,class:"text-sm text-gray-400 flex items-center justify-center w-full h-full"},ft=["onClick"],mt={class:"text-xs text-zinc-300 flex items-center justify-between"},ht={class:"py-4"},_t={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},vt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},xt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},pt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},bt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},Ct={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},wt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},yt={key:0},Nt={key:1},Tt={class:"text-lime-500"},$t={key:2},gt={key:3},kt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},Et={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},n="VA-BTC",St={__name:"NodeBTC",setup(It){const{t:f}=U(),z=window.$Func,g=D(null),y=D(!1),d=V(),v=L(),l=F({realtimeHashrate:0,workerNum:0,networkHashrate:0,theoreticalIncome:0,diffculty:0,fee:0}),k=F({series:[{name:`BTC${f("算力")}`,data:[],xAxisData:[]}],showLegend:!1,coin:n}),j=t=>{window.$Func.copyText(t)},P=Q(()=>{let t=f("获取中..."),s;return v.QUOTES.BTC&&v.RATES.CNY&&l.theoreticalIncome&&(s="¥ "+(Number(l.theoreticalIncome)*v.QUOTES.BTC*v.RATES.CNY).toFixed(4),t=`1T ≈ ${s} ≈ ${l.theoreticalIncome} ${z.transPoolCoinName(n)}`),t}),E=t=>{let s,h=location.hostname,m=t.port,r=t.remark;return r||(t.protocol==0?s="stratum+tcp://":t.protocol==1?s="stratum+ssl://":t.protocol==2?s="RMS://":t.protocol==3?s="stratum+(tcp/ssl)://":t.protocol==5&&(s="RMS2://"),`${s}${h}:${m}`)},M=t=>{S.locale("zh-cn");let s=t.start_time||t.startTime,h=t.hashrates,m={data:[],time:[]};for(let r=0;r<h.length;r++){let N=s+6e5*r;m.data.push(h[r]),m.time.push(S(N).format("MMMM Do YYYY, h:mm:ss a"))}return m},R=()=>{y.value=!0,b({method:"get",url:C.get_pool_hashrate}).then(t=>{if(y.value=!1,t.data.status==0){let s=M(t.data.data);k.series=[{name:`BTC${f("算力")}`,data:s.data,xAxisData:s.time}],g.value.initChart()}else w.error(f("获取节点信息失败。"))})},A=()=>{b({method:"get",url:C.get_pool_info}).then(t=>{t.data.status==0?(l.realtimeHashrate=t.data.data[0].realtimeHashrate,l.workerNum=t.data.data[0].workerNum):w.error(f("获取节点信息失败。"))}),b({method:"get",url:C.get_pool_info_2}).then(t=>{t.data.status==0?(l.networkHashrate=t.data.data[0].networkHashrate,l.theoreticalIncome=t.data.data[0].theoreticalIncome.toFixed(15).replace(/\.?0+$/,""),l.diffculty=t.data.data[0].diffculty):w.error(f("获取节点信息失败。"))})},G=()=>{b({method:"get",url:C.get_fee}).then(t=>{t.data.status==0?t.data.data.forEach(s=>{s.coin==n&&(l.fee=s.r*100)}):w.error(f("获取费率失败!"))})};return q(()=>{A(),G(),R()}),(t,s)=>{const h=J("DocumentCopy"),m=tt,r=et,N=st,Y=W;return i(),c("div",null,[e("div",at,[s[0]||(s[0]=e("span",{class:"block rounded-full w-2 h-2 bg-blue-500 mr-2"},null,-1)),x(a(t.$t("BTC 矿池算力")),1)]),e("div",lt,[K(p(X,{chartConfig:k,ref_key:"hashChartRef",ref:g},null,8,["chartConfig"]),[[Y,y.value]]),e("div",ot,[e("h2",nt,[e("span",it,a(o(u)(n,l.realtimeHashrate).num),1),x(" "+a(o(u)(n,l.realtimeHashrate).unit)+" / S ",1)])])]),e("div",rt,[e("div",ct,[e("div",dt,[p(N,{"model-value":"all",type:"border-card",class:"h-full"},{default:$(()=>[!o(d).ENDPOINT_NODE[n]||o(d).ENDPOINT_NODE[n]&&!o(d).ENDPOINT_NODE[n][0]?(i(),c("div",ut,a(t.$t("此节点暂无公开端口")),1)):_("",!0),(i(!0),c(B,null,H(o(d).ENDPOINT_NODE[n],(T,I)=>(i(),Z(r,{label:I==0?t.$t("全部地区"):T[0].endpoint_name.split("-")[0],name:I==0?"all":T[0].endpoint_name},{default:$(()=>[(i(!0),c(B,null,H(T,(O,Ot)=>(i(),c("div",{onClick:Dt=>j(E(O)),class:"p-1"},[e("div",mt,[x(a(E(O))+" ",1),p(m,null,{default:$(()=>[p(h)]),_:1})])],8,ft))),256))]),_:2},1032,["label","name"]))),256))]),_:1})])]),e("div",ht,[e("div",_t,[e("div",null,a(t.$t("日理论收益")),1),e("div",null,a(P.value),1)]),e("div",vt,[e("div",null,a(t.$t("全网算力")),1),e("div",null,a(o(u)(n,l.networkHashrate).num)+" "+a(o(u)(n,l.networkHashrate).unit),1)]),e("div",xt,[e("div",null,a(t.$t("矿池算力")),1),e("div",null,a(o(u)(n,l.realtimeHashrate).num)+" "+a(o(u)(n,l.realtimeHashrate).unit),1)]),e("div",pt,[e("div",null,a(t.$t("矿工数量")),1),e("div",null,a(l.workerNum),1)]),e("div",bt,[e("div",null,a(t.$t("挖矿难度")),1),e("div",null,a(o(u)(n,l.diffculty).num)+" "+a(o(u)(n,l.diffculty).unit),1)]),e("div",Ct,[e("div",null,a(t.$t("最小起付额")),1),s[1]||(s[1]=e("div",null," 0.001 BTC ",-1))]),e("div",wt,[o(d).CONFIG.fee=="1"?(i(),c("div",yt,a(t.$t("收益模式与费率")),1)):_("",!0),o(d).CONFIG.fee=="1"?(i(),c("div",Nt,[e("div",null,[s[2]||(s[2]=x("FPPS ")),e("span",Tt,a(l.fee)+" %",1)])])):_("",!0),o(d).CONFIG.fee=="0"?(i(),c("div",$t,a(t.$t("收益模式")),1)):_("",!0),o(d).CONFIG.fee=="0"?(i(),c("div",gt,s[3]||(s[3]=[e("div",null,"FPPS",-1)]))):_("",!0)]),e("div",kt,[e("div",null,a(t.$t("打款时间(UTC)")),1),e("div",null,a(t.$t("每日02:00到10:00")),1)]),e("div",Et,[e("div",null,a(t.$t("结算时间(UTC)")),1),e("div",null,a(t.$t("昨日00:00到今日00:00")),1)])])])])}}};export{St as default};
