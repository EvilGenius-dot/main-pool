import{J as G,d as q,q as B,k as Q,e as H,l as S,m as V,n as J,p as K,c as d,o as r,a as e,v,x as s,s as W,A as X,j as x,C as Z,w as k,b as h,u as i,F as j,B as F,f as tt,t as et,y as p,D as b,G as C,H as w,I as U}from"./index-D6Gy3zvT.js";import{E as st,a as at}from"./el-tab-pane-iedVjcuw.js";const nt={class:"px-4 text-xs text-zinc-400 flex items-center"},lt={class:"w-full h-40 relative"},ot={class:"pointer-events-none absolute inset-0 w-full h-full p-4"},it={class:"text-5xl font-bold transition-all"},rt={class:"text-lime-500"},ct={class:"p-4 -translate-y-12"},dt={class:"flex rounded-lg w-full"},ut={class:"tabs-t-2 w-full h-full"},ft={key:0,class:"text-sm text-gray-400 flex items-center justify-center w-full h-full"},mt=["onClick"],ht={class:"text-xs text-zinc-300 flex items-center justify-between"},_t={class:"py-4"},vt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},xt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},pt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},bt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},Ct={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},wt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},yt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},Nt={key:0},$t={key:1},Et={class:"text-lime-500"},gt={key:2},kt={key:3},Tt={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},It={class:"flex mb-2 items-center justify-between text-xs text-zinc-400"},o="ETC",Ft={__name:"NodeETC",setup(Ot){const{t:f}=G(),u=q(),_=B(),z=Q(),T=H(null),y=H(!1),P=t=>{window.$Func.copyText(t)},n=S({realtimeHashrate:{num:0,unit:"TH"},workerNum:0,networkHashrate:0,theoreticalIncome:0,theoreticalIncomeUnit:"H",diffculty:0,fee:0}),N=S({series:[{name:`${o}${f("算力")}`,data:[],xAxisData:[]}],showLegend:!1,coin:o}),R=V(()=>{let t=f("获取中...");return _.QUOTES[o]&&_.RATES.CNY&&n.theoreticalIncome&&(t="¥ "+(Number(n.theoreticalIncome)*_.QUOTES[o]*_.RATES.CNY).toFixed(4)),t}),A=()=>{y.value=!0;let t=`${C.get_pool_hashrate}?coin=${o}`;b({method:"get",url:t}).then(a=>{if(y.value=!1,a.data.status==0){let l=M(a.data.data);N.series=[{name:`${o}${f("算力")}`,data:l.data,xAxisData:l.time}],N.customUnit=l.unit,T.value.initChart()}else w.error(f("获取节点信息失败。"))})},I=t=>{let a,l=location.hostname,m=t.port,c=t.remark;return c||(console.log(t.protocol),t.protocol==0?a="stratum+tcp://":t.protocol==1?a="stratum+ssl://":t.protocol==2?a="RMS://":t.protocol==3?a="stratum+(tcp/ssl)://":t.protocol==5&&(a="RMS2://"),`${a}${l}:${m}`)},L=()=>{let t=`${C.get_pool_info}?coin=${o}`;b({method:"get",url:t}).then(l=>{l.data.status==0?(n.workerNum=l.data.data.etc.workers,n.realtimeHashrate.num=l.data.data.etc.shares.shares_15m,n.realtimeHashrate.unit=l.data.data.etc.shares.shares_unit):w.error(f("获取节点信息失败。"))});let a=`${C.get_pool_info_2}?coin=${o}`;b({method:"get",url:a}).then(l=>{l.data.status==0?(n.networkHashrate=l.data.data.ETC.net_hash,n.theoreticalIncome=l.data.data.ETC.rewards_per_unit,n.diffculty=l.data.data.ETC.difficulty,n.theoreticalIncomeUnit=l.data.data.ETC.reward_unit):w.error(f("获取节点信息失败。"))})},M=t=>{U.locale("zh-cn");let a=t.tickers,l=t.unit,m={data:[],time:[],unit:l};for(let c=0;c<a.length;c++){let $=a[c][0],E=a[c][1];m.data.push(E),m.time.push(U($*1e3).format("MMMM Do YYYY, h:mm:ss a"))}return m},Y=()=>{b({method:"get",url:C.get_fee}).then(t=>{t.data.status==0?t.data.data.forEach(a=>{a.coin==o&&(n.fee=a.r*100)}):w.error(f("获取费率失败!"))})};return J(()=>{L(),Y(),A()}),(t,a)=>{const l=K("DocumentCopy"),m=et,c=st,$=at,E=X;return r(),d("div",null,[e("div",nt,[a[0]||(a[0]=e("span",{class:"block rounded-full w-2 h-2 bg-blue-500 mr-2"},null,-1)),v(s(o)+" "+s(t.$t("矿池算力")),1)]),e("div",lt,[W(x(Z,{chartConfig:N,ref_key:"hashChartRef",ref:T},null,8,["chartConfig"]),[[E,y.value]]),e("div",ot,[e("h2",it,[e("span",rt,s(n.realtimeHashrate.num),1),v(" "+s(n.realtimeHashrate.unit),1)])])]),e("div",ct,[e("div",dt,[e("div",ut,[x($,{"model-value":"all",type:"border-card",class:"h-full"},{default:k(()=>[!i(u).ENDPOINT_NODE[o]||i(u).ENDPOINT_NODE[o]&&!i(u).ENDPOINT_NODE[o][0]?(r(),d("div",ft,s(t.$t("此节点暂无公开端口")),1)):h("",!0),(r(!0),d(j,null,F(i(u).ENDPOINT_NODE[o],(g,O)=>(r(),tt(c,{label:O==0?t.$t("全部地区"):g[0].endpoint_name.split("-")[0],name:O==0?"all":g[0].endpoint_name},{default:k(()=>[(r(!0),d(j,null,F(g,(D,Dt)=>(r(),d("div",{onClick:Ht=>P(I(D)),class:"p-1"},[e("div",ht,[v(s(I(D))+" ",1),x(m,null,{default:k(()=>[x(l)]),_:1})])],8,mt))),256))]),_:2},1032,["label","name"]))),256))]),_:1})])]),e("div",_t,[e("div",vt,[e("div",null,s(t.$t("日理论收益")),1),e("div",null,s(R.value)+" / "+s(n.theoreticalIncomeUnit),1)]),e("div",xt,[e("div",null,s(t.$t("全网算力")),1),e("div",null,s(i(p)(o,n.networkHashrate).num)+" "+s(i(p)(o,n.networkHashrate).unit),1)]),e("div",pt,[e("div",null,s(t.$t("矿池算力")),1),e("div",null,s(n.realtimeHashrate.num)+" "+s(n.realtimeHashrate.unit),1)]),e("div",bt,[e("div",null,s(t.$t("矿工数量")),1),e("div",null,s(n.workerNum),1)]),e("div",Ct,[e("div",null,s(t.$t("挖矿难度")),1),e("div",null,s(i(p)(o,n.diffculty).num)+" "+s(i(p)(o,n.diffculty).unit),1)]),e("div",wt,[e("div",null,s(t.$t("最小起付额")),1),e("div",null,s(i(z).COIN_DEFAULT_PAY[o].count)+" "+s(o),1)]),e("div",yt,[i(u).CONFIG.fee=="1"?(r(),d("div",Nt,s(t.$t("收益模式与费率")),1)):h("",!0),i(u).CONFIG.fee=="1"?(r(),d("div",$t,[e("div",null,[a[1]||(a[1]=v("FPPS ")),e("span",Et,s(n.fee)+" %",1)])])):h("",!0),i(u).CONFIG.fee=="0"?(r(),d("div",gt,s(t.$t("收益模式")),1)):h("",!0),i(u).CONFIG.fee=="0"?(r(),d("div",kt,a[2]||(a[2]=[e("div",null,"FPPS",-1)]))):h("",!0)]),e("div",Tt,[e("div",null,s(t.$t("打款时间(UTC)")),1),e("div",null,s(t.$t("每日02:00到10:00")),1)]),e("div",It,[e("div",null,s(t.$t("结算时间(UTC)")),1),e("div",null,s(t.$t("昨日00:00到今日00:00")),1)])])])])}}};export{Ft as default};
