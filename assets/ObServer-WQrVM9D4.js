import{K as O,h as N,f as p,s as x,c as d,o as s,b as A,l as n,t as u,w as o,g as f,d as i,aS as F,aT as I,F as T,C as D,u as G,aU as H,O as K,y as c,x as b,aO as M,A as h,aR as P,G as g,H as k,I as $}from"./index-LtxatZno.js";const j={class:"title text-stone-50 mb-5"},q={key:0,class:"text-stone-50"},z={key:1,class:"text-stone-50"},X={__name:"ObServer",setup(J){const{t:v}=O(),E=N(),a=p(""),l=p(null),t=p(!1),y=x(()=>`${window.location.origin}${window.location.pathname}#/dashboard?ob=${l.value}`),S=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:2}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("获取失败。"))}))},w=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:0}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("创建失败。"))}))},U=()=>{a.value&&(t.value=!0,g({url:k.observer,method:"post",data:{sid:a.value,action:1}}).then(e=>{t.value=!1,e.data.status==0?l.value=e.data.data:$.error(v("删除失败。"))}))};return(e,C)=>{const R=H,V=I,_=F,B=K,m=M,L=P;return s(),d("div",null,[A("h1",j,u(e.$t("观察者链接")),1),n(L,{"label-width":"auto"},{default:o(()=>[n(_,{label:e.$t("子账号")},{default:o(()=>[n(V,{placeholder:e.$t("请先选择子账号"),disabled:t.value,modelValue:a.value,"onUpdate:modelValue":C[0]||(C[0]=r=>a.value=r),onChange:S},{default:o(()=>[(s(!0),d(T,null,D(G(E).SUB_ACCOUNT,(r,Q)=>(s(),f(R,{label:r.name,value:r.id},null,8,["label","value"]))),256))]),_:1},8,["placeholder","disabled","modelValue"])]),_:1},8,["label"]),n(_,{label:e.$t("观察者链接")},{default:o(()=>[a.value&&!l.value?(s(),d("p",q,u(e.$t("尚未生成链接, 请点击下方按钮生成。")),1)):i("",!0),a.value?i("",!0):(s(),d("p",z,u(e.$t("请先选择子账号。")),1)),a.value&&l.value?(s(),f(B,{key:2,type:"primary",href:y.value,target:"_blank"},{default:o(()=>[c(u(y.value),1)]),_:1},8,["href"])):i("",!0)]),_:1},8,["label"]),a.value?(s(),f(_,{key:0,label:" "},{default:o(()=>[b(n(m,{class:"ml-0",loading:t.value,onClick:w,text:"",bg:"",type:"success"},{default:o(()=>[c(u(e.$t("生成链接")),1)]),_:1},8,["loading"]),[[h,!l.value]]),b(n(m,{class:"!ml-0",loading:t.value,onClick:w,text:"",bg:"",type:"success"},{default:o(()=>[c(u(e.$t("更新连接")),1)]),_:1},8,["loading"]),[[h,l.value]]),b(n(m,{loading:t.value,onClick:U,text:"",bg:"",type:"danger"},{default:o(()=>[c(u(e.$t("删除链接")),1)]),_:1},8,["loading"]),[[h,l.value]])]),_:1})):i("",!0)]),_:1})])}}};export{X as default};
